% file: parts/jupiter.tex

%%%%%%%%%%%%%%%%%%%%
\begin{frame}{}
  \centerline{\Huge \teal{Jupiter}}
\end{frame}
%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%
\begin{frame}{}
  \begin{center}
    {\large Jupiter adopts the \red{client-server} architecture~\ncite{Nichols:UIST95}:} \\[3pt] \pause
    {\large $\blue{(n+1)}\; \text{replicas} \triangleq \blue{(n)}\; \text{\red{Client}} + \blue{(1)}\; \text{\red{Server}}$}
  \end{center}

  \begin{center}
    \begin{minipage}{0.50\textwidth}
      \input{tikz/jupiter-cs-tikz}
    \end{minipage}
  \end{center}

  \vspace{-1.00cm}
  \uncover<2->{
    \begin{center}
      User $\xrightarrow[\text{\hl{Respond Immed.}}]{\quad \text{Issue Ops} \quad}$ Client 
      $\xrightarrow[\text{Updates}]{\quad \text{FIFO} \quad}$ Server $\xrightarrow[\text{Updates}]{\quad \text{FIFO} \quad}$ Other Clients 
    \end{center}
  }
\end{frame}
%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%
\begin{frame}{}
  \begin{center}
    {\large \red{Challenge:} Conflicts caused by concurrent operations} \\[12pt] \pause
  \end{center}

  \missingfigure{conflicts}
\end{frame}
%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%
\begin{frame}{}
  \begin{center}
    {\large A simple yet \red{infeasible} solution:} \pause
  \end{center}

  \begin{columns}
    \column{0.60\textwidth}
      \begin{enumerate}[(1)]
	\item Replicas respond to local user operations immediately as required.
	\item Updates are propogated to the server.
	\item All updates are \red{totally ordered} at the server.
	\item Replicas are notified to synchronize with the server.
      \end{enumerate}
  \end{columns}
\end{frame}
%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%
\begin{frame}{}
  \centerline{\hl{Operational Transformation} (OT)~\ncite{Ellis:SIGMOD89}}

  \begin{columns}
    \column{0.40\textwidth}
      \begin{center}
	\input{tikz/no-ot-tcs06-tikz}
      \end{center}
    \column{0.40\textwidth}
      \begin{center}
	\input{tikz/ot-tcs06-tikz}
      \end{center}
  \end{columns}
\end{frame}
%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%
\begin{frame}{}
  \fig{width = 0.40\textwidth}{figs/ot}

  \begin{equation*}
    \text{\hl{Commutative}\;\; \resizebox{0.35\textwidth}{!}{$\sigma; o_1; o_2' \equiv \sigma; o_2; o_1'$}}
  \end{equation*}

  \centerline{\ncite{Ellis:SIGMOD89}}
\end{frame}
%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%
\begin{frame}{}
  \begin{center}
    \resizebox{0.75\textwidth}{!}{\input{tikz/ot-diverge-two}}
  \end{center}
\end{frame}
%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%
\begin{frame}{}
  \begin{center}
    {\large Jupiter uses \hl{$2D$ state spaces}~\ncite{Xu:CSCW14} \\[5pt]
    to manage how and when to perform \red{OTs}~\ncite{Ellis:SIGMOD89}.}
  \end{center}

  % \fig{width = 0.32\textwidth}{figs/2d-statespace}
  \fig{width = 0.40\textwidth}{figs/ot-diverge-two}

  \pause
  \begin{columns}
    \column{0.85\textwidth}
      \begin{description}[\textsc{Global} Dimension:]
	\item[\textsc{Local} Dimension:] For operations generated by the client
	\item[\textsc{Global} Dimension:] For operations generated by others
      \end{description}
  \end{columns}
\end{frame}
%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%
\begin{frame}{}
  \centerline{\large Each \red{client} maintains a $2D$ state space.}

  % \fig{width = 0.50\textwidth}{figs/jupiter-illustration-client3-notations}
  \fig{width = 0.65\textwidth}{figs/jupiter-illustration}

  \centerline{\large The \red{server} maintains $n \; (=3)$ $2D$ state spaces, one for each client.}
\end{frame}
%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%
\begin{frame}{}
  \begin{center}
    \hl{\Huge Mismatch!}
    
    \vspace{1.00cm}
    {\large \red{Global property} on all replica states specified by \blue{\wlspec{}}}

    \vspace{0.20cm}
    \fig{width = 0.35\textwidth}{figs/mismatch.jpg}
    \vspace{0.20cm}

    {\large \red{Local view} each replica maintains in \blue{Jupiter}}
  \end{center}
\end{frame}
%%%%%%%%%%%%%%%%%%%%
